{"remainingRequest":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!/Users/lvpeng/Desktop/h5-template-vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/lvpeng/Desktop/h5-template-vue/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/lvpeng/Desktop/h5-template-vue/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvpeng/Desktop/h5-template-vue/src/views/Login.vue","mtime":1609503011024},{"path":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBTaW5wdXQgZnJvbSAnLi4vY29tcG9uZW50cy9TaW5wdXQnOwppbXBvcnQgeyBpc01vYmlsZSwgaXNFbXB0eSB9IGZyb20gJ0AvdXRpbHMvdmFsaWRhdGUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnRzOiB7CiAgICBTaW5wdXQ6IFNpbnB1dAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG1vYmlsZVZhbDogIiIsCiAgICAgIGNvZGVWYWw6ICIiLAogICAgICBzaG93OiB0cnVlLAogICAgICBjb3VudDogJycsCiAgICAgIHRpbWVyOiBudWxsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlTW9iaWxlOiBmdW5jdGlvbiBoYW5kbGVNb2JpbGUodmFsKSB7CiAgICAgIHRoaXMubW9iaWxlVmFsID0gdmFsOwogICAgfSwKICAgIGhhbmRsZUNvZGU6IGZ1bmN0aW9uIGhhbmRsZUNvZGUodmFsKSB7CiAgICAgIHRoaXMuY29kZVZhbCA9IHZhbDsKICAgIH0sCiAgICBnZXRoYW5kbGVDb2RlOiBmdW5jdGlvbiBnZXRoYW5kbGVDb2RlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKGlzRW1wdHkodGhpcy5tb2JpbGVWYWwpIHx8ICFpc01vYmlsZSh0aGlzLm1vYmlsZVZhbCkpIHsKICAgICAgICB0aGlzLiR0b2FzdCgn6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+3Jyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgVElNRV9DT1VOVCA9IDYwOwoKICAgICAgaWYgKCF0aGlzLnRpbWVyKSB7CiAgICAgICAgdGhpcy5jb3VudCA9IFRJTUVfQ09VTlQ7CiAgICAgICAgdGhpcy5zaG93ID0gZmFsc2U7CiAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChfdGhpcy5jb3VudCA+IDAgJiYgX3RoaXMuY291bnQgPD0gVElNRV9DT1VOVCkgewogICAgICAgICAgICBfdGhpcy5jb3VudC0tOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuc2hvdyA9IHRydWU7CiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoX3RoaXMudGltZXIpOwogICAgICAgICAgICBfdGhpcy50aW1lciA9IG51bGw7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTAwMCk7CiAgICAgIH0KCiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy4kZHl5LmFwaS5sb2dpbi5HZXRjb2RlKHsKICAgICAgICAgICJwaG9uZSI6IHRoaXMubW9iaWxlVmFsLAogICAgICAgICAgInBpZCI6IDEKICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkge30KICAgIH0sCiAgICBoYW5kbGVTdWJtaXQ6IGZ1bmN0aW9uIGhhbmRsZVN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAoaXNFbXB0eSh0aGlzLm1vYmlsZVZhbCkgfHwgIWlzTW9iaWxlKHRoaXMubW9iaWxlVmFsKSkgewogICAgICAgIHRoaXMuJHRvYXN0KCfor7fovpPlhaXmraPnoa7nmoTmiYvmnLrlj7cnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChpc0VtcHR5KHRoaXMuY29kZVZhbCkpIHsKICAgICAgICB0aGlzLiR0b2FzdCgn6K+36L6T5YWl6aqM6K+B56CBJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIHRoaXMuJGR5eS5hcGkubG9naW4uUG9zdGxvZ2luKHsKICAgICAgICAgICJsb2dpblR5cGUiOiAxLAogICAgICAgICAgInBob25lRGF0YSI6IHsKICAgICAgICAgICAgImNvZGUiOiB0aGlzLmNvZGVWYWwsCiAgICAgICAgICAgICJwaG9uZSI6IHRoaXMubW9iaWxlVmFsCiAgICAgICAgICB9LAogICAgICAgICAgInBpZCI6IDEsCiAgICAgICAgICAicGxhdGZvcm1UeXBlIjogMQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAnMjAwJykgewogICAgICAgICAgICBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dyYWRlJywgcmVzLmRhdGEuc2VsZWN0R3JhZGUpOwoKICAgICAgICAgICAgX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgndXNlci91c2VySW5mbycsIHJlcy5kYXRhLmJzSW5mbyk7CgogICAgICAgICAgICBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL2FwcExvZ2luJywgcmVzLmRhdGEudG9rZW4udG9rZW4pOwoKICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gX3RoaXMyLiRyb3V0ZS5xdWVyeTsKICAgICAgICAgICAgdmFyIHJlZGlyZWN0ID0gZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5LnJlZGlyZWN0KTsKCiAgICAgICAgICAgIGlmIChxdWVyeSAmJiByZWRpcmVjdCAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgIF90aGlzMi4kcm91dGVyLnJlcGxhY2UocmVkaXJlY3QpOwoKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBjYXRjaCAoZSkge30KICAgIH0KICB9Cn07"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <div class=\"login-containe\">\n        <div class=\"title-text\">短信验证码登录</div>\n        <span class=\"tips\">若该手机号未注册，我们将自动为您注册</span>\n        <Sinput title=\"请输入手机号\" @handleClick=\"handleMobile\"/>\n        <Sinput title=\"请输入验证码\" @handleClick=\"handleCode\" :num=\"4\">\n            <div v-show=\"show\" class=\"btn\" @click=\"gethandleCode\">获取验证码</div>\n            <div v-show=\"!show\" class=\"btn\" @click=\"gethandleCode\">{{count}}秒</div>\n        </Sinput>\n        <div class=\"login_btn-wrap\">\n            <van-image @click=\"handleSubmit\" class=\"login_btn\"\n                :src=\"require('@/assets/images/login_btn.png')\"/>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport Sinput  from '../components/Sinput';\nimport { isMobile ,isEmpty } from '@/utils/validate'\n    export default {\n        name:'Login',\n        components:{Sinput},\n        data() {\n            return {\n                mobileVal:\"\",\n                codeVal:\"\",\n                show: true,\n                count: '',\n                timer: null,\n            }\n        },\n        methods: {\n            handleMobile(val){\n                this.mobileVal = val;\n            },\n            handleCode(val){\n                this.codeVal = val;\n            },\n            gethandleCode(){\n                if(isEmpty(this.mobileVal)||!isMobile(this.mobileVal)){\n                    this.$toast('请输入正确的手机号');\n                    return;\n                }\n                const TIME_COUNT = 60;\n                if (!this.timer) {\n                    this.count = TIME_COUNT;\n                    this.show = false;\n                    this.timer = setInterval(() => {\n                        if (this.count > 0 && this.count <= TIME_COUNT) {\n                        this.count--;\n                        } else {\n                            this.show = true;\n                        clearInterval(this.timer);\n                            this.timer = null;\n                        }\n                    }, 1000)\n                }\n                try {\n                    this.$dyy.api.login.Getcode({\n                        \"phone\": this.mobileVal,\n                        \"pid\": 1\n                    })\n                } catch (e) {\n\n                }\n            },\n            handleSubmit(){\n                if(isEmpty(this.mobileVal)||!isMobile(this.mobileVal)){\n                    this.$toast('请输入正确的手机号');\n                    return;\n                }\n                if (isEmpty(this.codeVal)) {\n                    this.$toast('请输入验证码');\n                    return;\n                }\n                try {\n                    this.$dyy.api.login.Postlogin({\n                    \"loginType\": 1,\n                    \"phoneData\": {\n                        \"code\": this.codeVal,\n                        \"phone\": this.mobileVal\n                    },\n                    \"pid\": 1,\n                    \"platformType\": 1\n                    }).then(res=>{\n                        if (res.code === '200') {\n                            this.$store.dispatch('user/grade', res.data.selectGrade)\n                            this.$store.dispatch('user/userInfo', res.data.bsInfo)\n                            this.$store.dispatch('user/appLogin', res.data.token.token)\n                            const { query } = this.$route;\n                            const redirect = decodeURIComponent(query.redirect);\n                            if (query && (redirect!=\"undefined\")) {\n                                this.$router.replace(redirect);\n                                return;\n                            }\n                        }\n                    })\n                    \n                } catch (e) {\n\n                }\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n.login-containe{\n    width:100%;\n    height:100%;\n    box-sizing: border-box;\n    padding:44px 25px 0;\n    .title-text{\n        height: 42px;\n        font-size: 30px;\n        font-weight: 500;\n        color: #2C2C2C;\n        line-height: 42px;\n    }\n    .tips{\n        height: 17px;\n        font-size: 12px;\n        color: #D0D1D3;\n        line-height: 17px; \n        margin: 13px 0 6px;\n    }\n    .btn{\n        width: 84px;\n        height: 50px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 12px;\n        color: rgba(0, 0, 0, 0.85);\n    }\n    .btn::before{\n        content:\"\";\n        width: 1px;\n        height: 24px;\n        background:rgba(220, 220, 220, 1);\n        display:inline-block;      \n        position:absolute ;     \n        right: 84px;\n    }\n    .login_btn-wrap{\n            width:100%;\n            height: 74px;\n            margin-top: 69px;\n            display: flex;\n            justify-content: center;\n        .login_btn{\n            width:325px;\n            height: 74px;\n        }\n    }\n\n}\n</style>\n"],"sourceRoot":"src/views"}]}