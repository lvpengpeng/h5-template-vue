{"remainingRequest":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/lvpeng/Desktop/h5-template-vue/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/lvpeng/Desktop/h5-template-vue/src/views/Login.vue","mtime":1609503011024},{"path":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lvpeng/Desktop/h5-template-vue/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgU2lucHV0ICBmcm9tICcuLi9jb21wb25lbnRzL1NpbnB1dCc7CmltcG9ydCB7IGlzTW9iaWxlICxpc0VtcHR5IH0gZnJvbSAnQC91dGlscy92YWxpZGF0ZScKICAgIGV4cG9ydCBkZWZhdWx0IHsKICAgICAgICBuYW1lOidMb2dpbicsCiAgICAgICAgY29tcG9uZW50czp7U2lucHV0fSwKICAgICAgICBkYXRhKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgbW9iaWxlVmFsOiIiLAogICAgICAgICAgICAgICAgY29kZVZhbDoiIiwKICAgICAgICAgICAgICAgIHNob3c6IHRydWUsCiAgICAgICAgICAgICAgICBjb3VudDogJycsCiAgICAgICAgICAgICAgICB0aW1lcjogbnVsbCwKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbWV0aG9kczogewogICAgICAgICAgICBoYW5kbGVNb2JpbGUodmFsKXsKICAgICAgICAgICAgICAgIHRoaXMubW9iaWxlVmFsID0gdmFsOwogICAgICAgICAgICB9LAogICAgICAgICAgICBoYW5kbGVDb2RlKHZhbCl7CiAgICAgICAgICAgICAgICB0aGlzLmNvZGVWYWwgPSB2YWw7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdldGhhbmRsZUNvZGUoKXsKICAgICAgICAgICAgICAgIGlmKGlzRW1wdHkodGhpcy5tb2JpbGVWYWwpfHwhaXNNb2JpbGUodGhpcy5tb2JpbGVWYWwpKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdCgn6K+36L6T5YWl5q2j56Gu55qE5omL5py65Y+3Jyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgVElNRV9DT1VOVCA9IDYwOwogICAgICAgICAgICAgICAgaWYgKCF0aGlzLnRpbWVyKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudCA9IFRJTUVfQ09VTlQ7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY291bnQgPiAwICYmIHRoaXMuY291bnQgPD0gVElNRV9DT1VOVCkgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvdW50LS07CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3cgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lciA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRkeXkuYXBpLmxvZ2luLkdldGNvZGUoewogICAgICAgICAgICAgICAgICAgICAgICAicGhvbmUiOiB0aGlzLm1vYmlsZVZhbCwKICAgICAgICAgICAgICAgICAgICAgICAgInBpZCI6IDEKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGFuZGxlU3VibWl0KCl7CiAgICAgICAgICAgICAgICBpZihpc0VtcHR5KHRoaXMubW9iaWxlVmFsKXx8IWlzTW9iaWxlKHRoaXMubW9iaWxlVmFsKSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QoJ+ivt+i+k+WFpeato+ehrueahOaJi+acuuWPtycpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChpc0VtcHR5KHRoaXMuY29kZVZhbCkpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdCgn6K+36L6T5YWl6aqM6K+B56CBJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRkeXkuYXBpLmxvZ2luLlBvc3Rsb2dpbih7CiAgICAgICAgICAgICAgICAgICAgImxvZ2luVHlwZSI6IDEsCiAgICAgICAgICAgICAgICAgICAgInBob25lRGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgImNvZGUiOiB0aGlzLmNvZGVWYWwsCiAgICAgICAgICAgICAgICAgICAgICAgICJwaG9uZSI6IHRoaXMubW9iaWxlVmFsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAicGlkIjogMSwKICAgICAgICAgICAgICAgICAgICAicGxhdGZvcm1UeXBlIjogMQogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gJzIwMCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL2dyYWRlJywgcmVzLmRhdGEuc2VsZWN0R3JhZGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlci91c2VySW5mbycsIHJlcy5kYXRhLmJzSW5mbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL2FwcExvZ2luJywgcmVzLmRhdGEudG9rZW4udG9rZW4pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB7IHF1ZXJ5IH0gPSB0aGlzLiRyb3V0ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0ID0gZGVjb2RlVVJJQ29tcG9uZW50KHF1ZXJ5LnJlZGlyZWN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxdWVyeSAmJiAocmVkaXJlY3QhPSJ1bmRlZmluZWQiKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHJlZGlyZWN0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K"},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div class=\"login-containe\">\n        <div class=\"title-text\">短信验证码登录</div>\n        <span class=\"tips\">若该手机号未注册，我们将自动为您注册</span>\n        <Sinput title=\"请输入手机号\" @handleClick=\"handleMobile\"/>\n        <Sinput title=\"请输入验证码\" @handleClick=\"handleCode\" :num=\"4\">\n            <div v-show=\"show\" class=\"btn\" @click=\"gethandleCode\">获取验证码</div>\n            <div v-show=\"!show\" class=\"btn\" @click=\"gethandleCode\">{{count}}秒</div>\n        </Sinput>\n        <div class=\"login_btn-wrap\">\n            <van-image @click=\"handleSubmit\" class=\"login_btn\"\n                :src=\"require('@/assets/images/login_btn.png')\"/>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport Sinput  from '../components/Sinput';\nimport { isMobile ,isEmpty } from '@/utils/validate'\n    export default {\n        name:'Login',\n        components:{Sinput},\n        data() {\n            return {\n                mobileVal:\"\",\n                codeVal:\"\",\n                show: true,\n                count: '',\n                timer: null,\n            }\n        },\n        methods: {\n            handleMobile(val){\n                this.mobileVal = val;\n            },\n            handleCode(val){\n                this.codeVal = val;\n            },\n            gethandleCode(){\n                if(isEmpty(this.mobileVal)||!isMobile(this.mobileVal)){\n                    this.$toast('请输入正确的手机号');\n                    return;\n                }\n                const TIME_COUNT = 60;\n                if (!this.timer) {\n                    this.count = TIME_COUNT;\n                    this.show = false;\n                    this.timer = setInterval(() => {\n                        if (this.count > 0 && this.count <= TIME_COUNT) {\n                        this.count--;\n                        } else {\n                            this.show = true;\n                        clearInterval(this.timer);\n                            this.timer = null;\n                        }\n                    }, 1000)\n                }\n                try {\n                    this.$dyy.api.login.Getcode({\n                        \"phone\": this.mobileVal,\n                        \"pid\": 1\n                    })\n                } catch (e) {\n\n                }\n            },\n            handleSubmit(){\n                if(isEmpty(this.mobileVal)||!isMobile(this.mobileVal)){\n                    this.$toast('请输入正确的手机号');\n                    return;\n                }\n                if (isEmpty(this.codeVal)) {\n                    this.$toast('请输入验证码');\n                    return;\n                }\n                try {\n                    this.$dyy.api.login.Postlogin({\n                    \"loginType\": 1,\n                    \"phoneData\": {\n                        \"code\": this.codeVal,\n                        \"phone\": this.mobileVal\n                    },\n                    \"pid\": 1,\n                    \"platformType\": 1\n                    }).then(res=>{\n                        if (res.code === '200') {\n                            this.$store.dispatch('user/grade', res.data.selectGrade)\n                            this.$store.dispatch('user/userInfo', res.data.bsInfo)\n                            this.$store.dispatch('user/appLogin', res.data.token.token)\n                            const { query } = this.$route;\n                            const redirect = decodeURIComponent(query.redirect);\n                            if (query && (redirect!=\"undefined\")) {\n                                this.$router.replace(redirect);\n                                return;\n                            }\n                        }\n                    })\n                    \n                } catch (e) {\n\n                }\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n.login-containe{\n    width:100%;\n    height:100%;\n    box-sizing: border-box;\n    padding:44px 25px 0;\n    .title-text{\n        height: 42px;\n        font-size: 30px;\n        font-weight: 500;\n        color: #2C2C2C;\n        line-height: 42px;\n    }\n    .tips{\n        height: 17px;\n        font-size: 12px;\n        color: #D0D1D3;\n        line-height: 17px; \n        margin: 13px 0 6px;\n    }\n    .btn{\n        width: 84px;\n        height: 50px;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-size: 12px;\n        color: rgba(0, 0, 0, 0.85);\n    }\n    .btn::before{\n        content:\"\";\n        width: 1px;\n        height: 24px;\n        background:rgba(220, 220, 220, 1);\n        display:inline-block;      \n        position:absolute ;     \n        right: 84px;\n    }\n    .login_btn-wrap{\n            width:100%;\n            height: 74px;\n            margin-top: 69px;\n            display: flex;\n            justify-content: center;\n        .login_btn{\n            width:325px;\n            height: 74px;\n        }\n    }\n\n}\n</style>\n"]}]}